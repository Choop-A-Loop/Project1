<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Project 1</title>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />

  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->

  <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
</head>

<body>




  <nav>
    <div class="nav-wrapper">
      <a href="index.html" class="brand-logo">Logo</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="ingredients.html">Ingredients</a></li>
        <li><a href="recipes.html">Recipes</a></li>
        <li><a href="stores.html">Favorites</a></li>
        <li><a href="list.html">Shopping list</a></li>
      </ul>
    </div>
  </nav>


  <div class="container">
    <h1 class="col s12 center-align">
      What's in your Fridge?
    </h1>

    <div id="pageContent">
      <ul class="collapsible popout">
        <!-- <li>
          <div class="collapsible-header"><i class="material-icons">info</i>Alcoholic products</div>
          <div class="collapsible-body"><span>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
            </span>
          </div>
        </li> -->

        <!-- <li>
          <div class="collapsible-header"><i class="material-icons">info</i>Spices and Sauces</div>
          <div class="collapsible-body"><span>
            <span>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
              <label>
                <input type="checkbox" />
                <span>Yellow</span>
              </label><br>
            </span>
          </span></div>
        </li> -->
      </ul>
      <div class="row">
        <a class="waves-effect waves-light btn-large col s6 right-align"><i
            class="material-icons left">cloud</i>cancel</a>
        <a class="waves-effect waves-light btn-large col s5 offset-s1 left-align" id = "saveBtn"><i
            class="material-icons right">cloud</i>save</a>
      </div>
    </div>
  </div>

  </div>
  </div>

  <script src="js/script.js"> </script>
  <script src="js/ingredients.js"> </script>
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <script type="text/javascript">

    $(document).ready(function () {
      $('.collapsible').collapsible();

      
    });
    var storedIng = JSON.parse(localStorage.getItem("ingredients"));
      var saveIngArray = [];
      if (!storedIng) {
        localStorage.setItem("ingredients", JSON.stringify(saveIngArray));
      } else {
        saveIngArray = storedIng;
      }

    $(".collapsible").on("click", ".collapsible-header", function (evt) {
      evt.preventDefault();
      console.log("event working");
      $(this).children(":first").text("check")
    });;

    $(".collapsible").on("click", ".ingSpanspan", function (evt) {
      var aux = evt.target.textContent;

      if (saveIngArray.includes(aux)) { 
        saveIngArray.indexOf(aux);
        saveIngArray = saveIngArray.filter(function (item) {
          return item !== aux;
        })
      }else {
        saveIngArray.push(aux);
      }
console.log(saveIngArray)
    });

    $("#saveBtn").on("click", function(){
      localStorage.setItem("ingredients", JSON.stringify(saveIngArray));
      console.log("localStorage has "+JSON.parse(localStorage.getItem("ingredients")));
      document.location.href = "recipes.html";
    })





    // $(".collapsible").on("click", ".collapsible-header", function (evt) {

  </script>

</body>

</html>